"use strict";(self["webpackChunkvideo_player_demo"]=self["webpackChunkvideo_player_demo"]||[]).push([[17],{3170:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(4169),d=(a(6809),a(3396)),i=a(7139),l=a(5213),o=a(4870),r=a(3066);const s=(0,d._)("canvas",{id:"canvas",width:"600",height:"400",style:{border:"1px solid blue"}},null,-1);var c={__name:"canvasPlayer",setup(e){const t=(0,o.qj)({startDraw:!1,startVideotape:!1,videoEl:null,canvasEl:null,ctx:null,animateId:null,videotape:null});function a(){if(t.videoEl.paused||t.videoEl.ended)return;t.startDraw=!0;const{width:e,height:n}=t.canvasEl;t.ctx.clearRect(0,0,e,n),t.ctx.drawImage(t.videoEl,0,0,e,n),t.animateId=requestAnimationFrame(a)}function c(){t.videoEl.paused&&(t.videoEl.play(),a())}function u(){t.videoEl.paused||(t.videoEl.pause(),p())}function p(){cancelAnimationFrame(t.animateId)}function v(){t.startDraw&&(0,r.yx)({download:!1,width:500,height:300})}function m(){t.startDraw&&(console.log(t.startVideotape,t.videotape),t.startVideotape?t.videotape.stop():t.videotape.start(),t.startVideotape=!t.startVideotape)}return(0,d.bv)((()=>{t.videoEl=document.getElementById("video"),t.canvasEl=document.getElementById("canvas"),t.ctx=t.canvasEl.getContext("2d"),t.videotape=new r.vl({el:"#canvas",download:!1})})),(e,a)=>{const o=n.mi;return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("video",{id:"video",src:l,style:{display:"none"},controls:"",muted:"",onEnded:p},null,32),s,(0,d._)("div",null,[(0,d.Wm)(o,{onClick:c,type:"primary"},{default:(0,d.w5)((()=>[(0,d.Uk)("播放")])),_:1}),(0,d.Wm)(o,{onClick:u,type:"primary"},{default:(0,d.w5)((()=>[(0,d.Uk)("暂停")])),_:1}),(0,d.Wm)(o,{onClick:v,disabled:!t.startDraw,type:"primary"},{default:(0,d.w5)((()=>[(0,d.Uk)("截图")])),_:1},8,["disabled"]),(0,d.Wm)(o,{onClick:m,disabled:!t.startDraw,type:"primary"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,i.zw)(t.startVideotape?"停止":"录制"),1)])),_:1},8,["disabled"])])],64)}}};const u=c;var p=u},5213:function(e,t,a){e.exports=a.p+"media/1d13c7cba4e03cea81ba27c397280214.e0d623e8.mp4"}}]);
//# sourceMappingURL=canvas-player.f163a77b.js.map