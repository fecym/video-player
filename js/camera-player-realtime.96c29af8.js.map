{"version":3,"file":"js/camera-player-realtime.96c29af8.js","mappings":"8OACA,MAAMA,EAAa,CACjBC,MAAO,CACL,aAAc,SAGZC,GAA0B,IAAAC,GAAoB,MAAO,CACzDF,MAAO,CACL,aAAc,OACd,YAAa,SAEd,8BAA+B,GAGlC,OACEG,OAAQ,uBACRC,MAAMC,GACJ,MAAMC,GAAY,QAAS,CACzBC,kBAAkB,EAClBC,kBAAkB,EAClBC,SAAS,EACTC,YAAa,KACbC,QAAS,OAYXC,eAAeC,IACb,IACMP,EAAUC,kBACZD,EAAUI,YAAYI,OACtBR,EAAUE,kBAAmB,EAC7BF,EAAUC,kBAAmB,UAEvBD,EAAUI,YAAYK,QAC5BT,EAAUK,QAAQK,UAAYV,EAAUI,YAAYO,YACpDX,EAAUC,kBAAmB,EAIjC,CAFE,MAAOW,GACPZ,EAAUC,kBAAmB,CAC/B,CACF,CACA,SAASY,KACP,QAAgB,CACdC,UAAU,EACVC,MAAO,IACPC,OAAQ,IACRC,QAAS,SAEb,CACA,SAASC,IACFlB,EAAUC,mBACfD,EAAUE,iBAAmBF,EAAUI,YAAYe,SAAWnB,EAAUI,YAAYgB,QACpFpB,EAAUE,kBAAoBF,EAAUE,iBAC1C,CACA,OAtCA,SAAU,KACRF,EAAUK,QAAUgB,SAASC,cAAc,SAC3CtB,EAAUI,YAAc,IAAI,KAAY,CACtCmB,iBAAkB,CAChBC,OAAO,EACPC,OAAO,GAETX,UAAU,GACV,IA8BG,CAACY,EAAMC,KACZ,MAAMC,EAAuB,KAC7B,OAAO,WAAc,QAAoB,KAAW,KAAM,EAAC,IAAAhC,GAAoB,QAAS,CACtFiC,SAAU,GACVC,MAAO,GACPC,SAAU,GACVhB,MAAO,MACPC,OAAQ,MACRgB,UAAWL,EAAO,KAAOA,EAAO,GAAKM,GAAUjC,EAAUG,SAAU,IAClE,KAAM,KAAK,IAAAP,GAAoB,MAAOH,EAAY,EAAC,QAAamC,EAAsB,CACvFM,QAASrB,EACTsB,UAAWnC,EAAUG,QACrBiC,KAAM,WACL,CACDC,SAAS,SAAS,IAAM,EAAC,QAAiB,SAC1CzC,EAAG,GACF,EAAG,CAAC,cAAc,QAAagC,EAAsB,CACtDM,QAAS3B,EACT6B,KAAM,WACL,CACDC,SAAS,SAAS,IAAM,EAAC,SAAiB,QAAkBrC,EAAUC,iBAA0B,KAAP,MAAc,MACvGL,EAAG,KACD,QAAagC,EAAsB,CACrCM,QAAShB,EACTkB,KAAM,UACND,UAAWnC,EAAUC,kBACpB,CACDoC,SAAS,SAAS,IAAM,EAAC,SAAiB,QAAkBrC,EAAUE,iBAA0B,KAAP,MAAc,MACvGN,EAAG,GACF,EAAG,CAAC,eAAgBD,GAAa,GAAG,CAE3C,GC1FF,MAAM2C,EAAc,EAEpB,O","sources":["webpack://video-player-demo/./src/views/NativePlayer/cameraPlayerRealtime.vue","webpack://video-player-demo/./src/views/NativePlayer/cameraPlayerRealtime.vue?0e6c"],"sourcesContent":["import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"margin-top\": \"10px\",\n    \"font-size\": \"14px\"\n  }\n}, \" 该功能运行，需要 Chrome 在 108 版本 \", -1);\nimport { onMounted, reactive } from \"vue\";\nimport { MediaRecord, videoScreenshot } from \"@/utils\";\nexport default {\n  __name: 'cameraPlayerRealtime',\n  setup(__props) {\n    const videoInfo = reactive({\n      startMediaRecord: false,\n      pauseMediaRecord: false,\n      canplay: false,\n      mediaRecord: null,\n      videoEL: null\n    });\n    onMounted(() => {\n      videoInfo.videoEL = document.querySelector(\"video\");\n      videoInfo.mediaRecord = new MediaRecord({\n        mediaConstraints: {\n          audio: true,\n          video: true\n        },\n        download: true\n      });\n    });\n    async function onOpenCamera() {\n      try {\n        if (videoInfo.startMediaRecord) {\n          videoInfo.mediaRecord.stop();\n          videoInfo.pauseMediaRecord = false;\n          videoInfo.startMediaRecord = false;\n        } else {\n          await videoInfo.mediaRecord.start();\n          videoInfo.videoEL.srcObject = videoInfo.mediaRecord.mediaStream;\n          videoInfo.startMediaRecord = true;\n        }\n      } catch (e) {\n        videoInfo.startMediaRecord = false;\n      }\n    }\n    function onScreenshot() {\n      videoScreenshot({\n        download: true,\n        width: 500,\n        height: 300,\n        videoEl: \"video\"\n      });\n    }\n    function onMediaOperate() {\n      if (!videoInfo.startMediaRecord) return;\n      videoInfo.pauseMediaRecord ? videoInfo.mediaRecord.resume() : videoInfo.mediaRecord.pause();\n      videoInfo.pauseMediaRecord = !videoInfo.pauseMediaRecord;\n    }\n    return (_ctx, _cache) => {\n      const _component_el_button = _resolveComponent(\"el-button\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"video\", {\n        controls: \"\",\n        muted: \"\",\n        autoplay: \"\",\n        width: \"800\",\n        height: \"600\",\n        onCanplay: _cache[0] || (_cache[0] = $event => videoInfo.canplay = true)\n      }, null, 32), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_button, {\n        onClick: onScreenshot,\n        disabled: !videoInfo.canplay,\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"截图\")]),\n        _: 1\n      }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n        onClick: onOpenCamera,\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(!videoInfo.startMediaRecord ? \"录制\" : \"停止\"), 1)]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        onClick: onMediaOperate,\n        type: \"primary\",\n        disabled: !videoInfo.startMediaRecord\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(!videoInfo.pauseMediaRecord ? \"暂停\" : \"恢复\"), 1)]),\n        _: 1\n      }, 8, [\"disabled\"])]), _hoisted_2], 64);\n    };\n  }\n};","/* unplugin-vue-components disabled */import script from \"./cameraPlayerRealtime.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./cameraPlayerRealtime.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","style","_hoisted_2","_","__name","setup","__props","videoInfo","startMediaRecord","pauseMediaRecord","canplay","mediaRecord","videoEL","async","onOpenCamera","stop","start","srcObject","mediaStream","e","onScreenshot","download","width","height","videoEl","onMediaOperate","resume","pause","document","querySelector","mediaConstraints","audio","video","_ctx","_cache","_component_el_button","controls","muted","autoplay","onCanplay","$event","onClick","disabled","type","default","__exports__"],"sourceRoot":""}