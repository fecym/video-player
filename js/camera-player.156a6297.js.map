{"version":3,"file":"js/camera-player.156a6297.js","mappings":"gQAEA,MAAMA,EAAa,CAAC,OACdC,EAAa,CACjBC,MAAO,CACL,aAAc,SAMlB,OACEC,OAAQ,eACRC,MAAMC,GACJ,MAAMC,GAAS,UACTC,GAAY,QAAS,CACzBC,kBAAkB,EAClBC,kBAAkB,EAClBC,SAAS,EACTC,YAAa,OAETC,GAAY,SAAS,IAClBL,EAAUI,aAAaE,KAAO,KAWvCC,eAAeC,IACb,IACMR,EAAUC,kBACZD,EAAUI,YAAYK,OACtBT,EAAUE,kBAAmB,EAC7BF,EAAUC,kBAAmB,UAEvBD,EAAUI,YAAYM,QAC5BV,EAAUC,kBAAmB,EAIjC,CAFE,MAAOU,GACPX,EAAUC,kBAAmB,CAC/B,CACF,CACA,SAASW,KACP,QAAgB,CACdC,UAAU,EACVC,MAAO,IACPC,OAAQ,IACRC,QAAS,SAEb,CACA,SAASC,IACFjB,EAAUC,mBACfD,EAAUE,iBAAmBF,EAAUI,YAAYc,SAAWlB,EAAUI,YAAYe,QACpFnB,EAAUE,kBAAoBF,EAAUE,iBAC1C,CACA,OApCA,SAAU,KACRF,EAAUI,YAAc,IAAI,KAAY,CACtCgB,iBAAkB,CAChBC,OAAO,EACPC,OAAO,GAETT,UAAU,GACV,IA6BG,CAACU,EAAMC,KACZ,MAAMC,EAAuB,KAC7B,OAAO,WAAc,QAAoB,KAAW,KAAM,EAAC,QAAOpB,KAAc,WAAc,QAAoB,QAAS,CACzHqB,IAAK,EACLC,KAAK,QAAOtB,GACZuB,SAAU,GACVC,MAAO,GACPf,MAAO,MACPC,OAAQ,MACRe,UAAWN,EAAO,KAAOA,EAAO,GAAKO,GAAU/B,EAAUG,SAAU,IAClE,KAAM,GAAIV,KAAe,QAAoB,IAAI,IAAO,IAAAuC,GAAoB,MAAOtC,EAAY,EAAC,QAAa+B,EAAsB,CACpIQ,QAASrB,EACTsB,UAAWlC,EAAUG,QACrBgC,KAAM,WACL,CACDC,SAAS,SAAS,IAAM,EAAC,QAAiB,SAC1CJ,EAAG,GACF,EAAG,CAAC,cAAc,QAAaP,EAAsB,CACtDQ,QAASzB,EACT2B,KAAM,WACL,CACDC,SAAS,SAAS,IAAM,EAAC,SAAiB,QAAkBpC,EAAUC,iBAA0B,KAAP,MAAc,MACvG+B,EAAG,KACD,QAAaP,EAAsB,CACrCQ,QAAShB,EACTkB,KAAM,UACND,UAAWlC,EAAUC,kBACpB,CACDmC,SAAS,SAAS,IAAM,EAAC,SAAiB,QAAkBpC,EAAUE,iBAA0B,KAAP,MAAc,MACvG8B,EAAG,GACF,EAAG,CAAC,cAAc,QAAaP,EAAsB,CACtDQ,QAAST,EAAO,KAAOA,EAAO,GAAKO,IAAU,QAAOhC,GAAQsC,KAAK,2BACjEC,KAAM,IACL,CACDF,SAAS,SAAS,IAAM,EAAC,QAAiB,iBAC1CJ,EAAG,OACE,GAAG,CAEd,GC/FF,MAAMO,EAAc,EAEpB,O","sources":["webpack://video-player-demo/./src/views/NativePlayer/cameraPlayer.vue","webpack://video-player-demo/./src/views/NativePlayer/cameraPlayer.vue?2a0f"],"sourcesContent":["import \"core-js/modules/es.array.push.js\";\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = [\"src\"];\nconst _hoisted_2 = {\n  style: {\n    \"margin-top\": \"20px\"\n  }\n};\nimport { computed, onMounted, reactive } from \"vue\";\nimport { MediaRecord, videoScreenshot } from \"@/utils\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'cameraPlayer',\n  setup(__props) {\n    const router = useRouter();\n    const videoInfo = reactive({\n      startMediaRecord: false,\n      pauseMediaRecord: false,\n      canplay: false,\n      mediaRecord: null\n    });\n    const cameraUrl = computed(() => {\n      return videoInfo.mediaRecord?.url ?? \"\";\n    });\n    onMounted(() => {\n      videoInfo.mediaRecord = new MediaRecord({\n        mediaConstraints: {\n          audio: true,\n          video: true\n        },\n        download: false\n      });\n    });\n    async function onOpenCamera() {\n      try {\n        if (videoInfo.startMediaRecord) {\n          videoInfo.mediaRecord.stop();\n          videoInfo.pauseMediaRecord = false;\n          videoInfo.startMediaRecord = false;\n        } else {\n          await videoInfo.mediaRecord.start();\n          videoInfo.startMediaRecord = true;\n        }\n      } catch (e) {\n        videoInfo.startMediaRecord = false;\n      }\n    }\n    function onScreenshot() {\n      videoScreenshot({\n        download: true,\n        width: 500,\n        height: 300,\n        videoEl: \"video\"\n      });\n    }\n    function onMediaOperate() {\n      if (!videoInfo.startMediaRecord) return;\n      videoInfo.pauseMediaRecord ? videoInfo.mediaRecord.resume() : videoInfo.mediaRecord.pause();\n      videoInfo.pauseMediaRecord = !videoInfo.pauseMediaRecord;\n    }\n    return (_ctx, _cache) => {\n      const _component_el_button = _resolveComponent(\"el-button\");\n      return _openBlock(), _createElementBlock(_Fragment, null, [_unref(cameraUrl) ? (_openBlock(), _createElementBlock(\"video\", {\n        key: 0,\n        src: _unref(cameraUrl),\n        controls: \"\",\n        muted: \"\",\n        width: \"800\",\n        height: \"600\",\n        onCanplay: _cache[0] || (_cache[0] = $event => videoInfo.canplay = true)\n      }, null, 40, _hoisted_1)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n        onClick: onScreenshot,\n        disabled: !videoInfo.canplay,\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"截图\")]),\n        _: 1\n      }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n        onClick: onOpenCamera,\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(!videoInfo.startMediaRecord ? \"录制\" : \"停止\"), 1)]),\n        _: 1\n      }), _createVNode(_component_el_button, {\n        onClick: onMediaOperate,\n        type: \"primary\",\n        disabled: !videoInfo.startMediaRecord\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(!videoInfo.pauseMediaRecord ? \"暂停\" : \"恢复\"), 1)]),\n        _: 1\n      }, 8, [\"disabled\"]), _createVNode(_component_el_button, {\n        onClick: _cache[1] || (_cache[1] = $event => _unref(router).push('camera-player-realtime')),\n        link: \"\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"想看实时录制，点这里\")]),\n        _: 1\n      })])], 64);\n    };\n  }\n};","/* unplugin-vue-components disabled */import script from \"./cameraPlayer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./cameraPlayer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","_hoisted_2","style","__name","setup","__props","router","videoInfo","startMediaRecord","pauseMediaRecord","canplay","mediaRecord","cameraUrl","url","async","onOpenCamera","stop","start","e","onScreenshot","download","width","height","videoEl","onMediaOperate","resume","pause","mediaConstraints","audio","video","_ctx","_cache","_component_el_button","key","src","controls","muted","onCanplay","$event","_","onClick","disabled","type","default","push","link","__exports__"],"sourceRoot":""}